<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Do You Love Me üíñ</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif;}
body{height:100vh;overflow:hidden;background:linear-gradient(135deg,#ff9a9e,#fad0c4);display:flex;align-items:center;justify-content:center;}
.container{text-align:center;z-index:2}
h1{color:#fff;font-size:2rem;margin-bottom:20px;text-shadow:0 0 10px rgba(0,0,0,0.3);}
.buttons{position:relative;width:260px;height:160px;margin:auto;}
button{padding:15px 25px;font-size:1.1rem;border:none;border-radius:30px;cursor:pointer;transition:0.2s;}
#yesBtn{background:#ff4d6d;color:#fff;}
#noBtn{background:#fff;color:#ff4d6d;position:absolute;left:50%;top:60%;transform:translate(-50%,-50%);}
.counter{margin-top:15px;color:#fff;}
.message{margin-top:10px;color:#fff;font-size:1rem;}
.heart{position:absolute;color:rgba(255,255,255,0.6);font-size:20px;animation:float 8s linear infinite;}
@keyframes float{0%{transform:translateY(100vh) scale(0.5);}100%{transform:translateY(-10vh) scale(1.2);}}
.explosion{position:absolute;font-size:24px;animation:explode 1s ease-out forwards;}
@keyframes explode{0%{transform:scale(0) translate(0,0); opacity:1;}100%{transform:scale(1.5) translate(var(--x), var(--y)); opacity:0;}}
.end{display:none;text-align:center;}
.end h2{color:#fff;margin-bottom:15px;}
.accept{background:#fff;color:#ff4d6d;margin-top:10px;}
.whatsapp{display:block;margin-top:15px;color:#fff;text-decoration:underline;}
#startMusic{margin-top:15px;background:#fff;color:#ff4d6d;border-radius:30px;padding:10px 20px;cursor:pointer;}
</style>
</head>

<body>

<div class="container" id="main">
  <h1 id="question">Do you love me? üíñ</h1>

  <div class="buttons">
    <button id="yesBtn">Yes ‚ù§Ô∏è</button>
    <button id="noBtn">No üíî</button>
  </div>

  <div class="counter">NO Attempts: <span id="count">0</span></div>
  <div class="message" id="msg"></div>
  <button id="startMusic">Play Music üéµ</button>
</div>

<div class="container end" id="end">
  <h2 id="endMsg">Will you be mine? üíç‚ù§Ô∏è</h2>
  <button class="accept">Accept üíç</button>
  <a id="shareLink" class="whatsapp" target="_blank">Share on WhatsApp üí¨</a>
</div>

<audio id="pop">
  <source src="pop.mp4" type="audio/mp4">
</audio>
<audio id="bgMusic" loop>
  <source src="background.mp4" type="audio/mp4">
</audio>

<script>
let noBtn = document.getElementById("noBtn");
let yesBtn = document.getElementById("yesBtn");
let countEl = document.getElementById("count");
let msg = document.getElementById("msg");
let pop = document.getElementById("pop");
let question = document.getElementById("question");
let endMsg = document.getElementById("endMsg");
let shareLink = document.getElementById("shareLink");
let main = document.getElementById("main");
let end = document.getElementById("end");
let bgMusic = document.getElementById("bgMusic");
let startMusicBtn = document.getElementById("startMusic");

// --- ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ∞ŸÉŸä ---
const urlParams = new URLSearchParams(window.location.search);
let person = urlParams.get("name");

if (!person || person.trim() === "") {
    person = prompt("Enter the person's name üíñ") || "Sweetheart";
}

question.textContent = `Do you love me, ${person}? ‚ù§Ô∏è`;
endMsg.textContent = `Will you be mine, ${person}? üíç‚ù§Ô∏è`;
shareLink.href = `https://wa.me/?text=I%20said%20YES%20‚ù§Ô∏è%20to%20${encodeURIComponent(person)}!%20Check%20it%20out:%20${encodeURIComponent(window.location.href)}`;

// --- ŸÜÿ∏ÿßŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑŸÖÿ∑Ÿàÿ± ---
function startAudio() {
    bgMusic.play().then(() => {
        startMusicBtn.style.display = "none";
    }).catch(() => {
        console.log("Waiting for user interaction to play audio");
    });
}

// ÿ™ÿ¥ÿ∫ŸäŸÑ ÿπŸÜÿØ ÿ£ŸàŸÑ ŸÑŸÖÿ≥ÿ© ŸÑŸÑÿ¥ÿßÿ¥ÿ© ŸÑÿ∂ŸÖÿßŸÜ ÿπŸÖŸÑŸáÿß ÿπŸÑŸâ ÿßŸÑŸÖŸàÿ®ÿßŸäŸÑ
document.body.addEventListener('click', startAudio, { once: true });
document.body.addEventListener('touchstart', startAudio, { once: true });

startMusicBtn.addEventListener("click", startAudio);

let count = 0; // ŸäŸÅÿ∂ŸÑ ÿ™ÿµŸÅŸäÿ± ÿßŸÑÿπÿØÿßÿØ ÿπŸÜÿØ ŸÉŸÑ ÿØÿÆŸàŸÑ ÿ¨ÿØŸäÿØ ŸÑÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÖÿ™ÿπÿ©

const messages = [
  "Why don't you love me? üò¢",
  "That hurts üíî",
  "Think again üôÉ",
  "Are you sure? ü•∫",
  "My heart is breaking üíî",
  "Please say yes üò≠"
];

function moveNo(){
  count++;
  countEl.textContent = count;
  msg.textContent = messages[Math.floor(Math.random()*messages.length)];
  if(navigator.vibrate){navigator.vibrate(50);}
  
  const area = document.querySelector(".buttons");
  const maxX = area.clientWidth - noBtn.offsetWidth;
  const maxY = area.clientHeight - noBtn.offsetHeight;
  const x = Math.random() * maxX;
  const y = Math.random() * maxY;
  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
  
  startAudio(); // ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿπŸÜÿØ ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑŸáÿ±Ÿàÿ®
}

noBtn.addEventListener("mouseover", moveNo);
noBtn.addEventListener("touchstart", moveNo);

yesBtn.addEventListener("click", () => {
  pop.currentTime = 0; 
  pop.play();
  startAudio(); 
  explodeHearts();
  setTimeout(() => {
    main.style.display = "none";
    end.style.display = "block";
  }, 800);
});

function explodeHearts(){
  for(let i=0; i<25; i++){
    const heart = document.createElement("div");
    heart.className="explosion";
    heart.textContent="‚ù§Ô∏è";
    heart.style.left="50%";
    heart.style.top="50%";
    heart.style.setProperty("--x",(Math.random()*200-100)+"px");
    heart.style.setProperty("--y",(Math.random()*200-100)+"px");
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(), 1000);
  }
}

setInterval(() => {
  const h = document.createElement("div");
  h.className="heart";
  h.textContent="üíñ";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=Math.random()*20+15+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(), 8000);
}, 400);
</script>

</body>
</html>
